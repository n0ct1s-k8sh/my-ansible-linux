---
- name: Verify
  hosts: ansiblinux_debian_12
  become: true
  tasks:
    - name: (DEBIAN) Check if main APT repo config is present
      ansible.builtin.apt_repository:
        repo: '{{ item }}'
        state: present
      loop:
        - 'deb http://deb.debian.org/debian {{ ansible_distribution_release }} main contrib non-free non-free-firmware'
        - 'deb-src http://deb.debian.org/debian {{ ansible_distribution_release }} main contrib non-free non-free-firmware'
        - 'deb http://deb.debian.org/debian-security/ {{ ansible_distribution_release }}-security main contrib non-free non-free-firmware'
        - 'deb-src http://deb.debian.org/debian-security/ {{ ansible_distribution_release }}-security main contrib non-free non-free-firmware'
        - 'deb http://deb.debian.org/debian {{ ansible_distribution_release }}-updates main contrib non-free non-free-firmware'
        - 'deb-src http://deb.debian.org/debian {{ ansible_distribution_release }}-updates main contrib non-free non-free-firmware'
      register: apt_repo_test
      failed_when: apt_repo_test is changed
