---
# bootstrapping tasks file for Debian hosts
- name: (DEBIAN) Deploy main APT repository config file
  ansible.builtin.template:
    src: templates/etc/apt/sources.list.j2
    dest: /etc/apt/sources.list
    mode: '0644'
    owner: root
    group: root
    backup: true

- name: (DEBIAN) Upgrade all packages
  ansible.builtin.apt:
    name: "*"
    update_cache: true
    state: latest

- name: (DEBIAN) Install kernel headers, firmware, dkms, development tools and basic packages
  ansible.builtin.apt:
    pkg:
      - linux-headers-amd64
      - dkms
      - firmware-linux
      - build-essential
      - git
      - neovim
      - apt-transport-https
      - curl
      - acl
    state: present

- name: (DEBIAN) Install hardware info & monitoring tools
  ansible.builtin.apt:
    pkg:
      - htop
      - neofetch
      - s-tui
      - lm-sensors
      - lsb-release
      - lshw
      - hwdata
      - hwinfo
      - inxi
    state: present

- name: (DEBIAN) Install NTFS driver
  ansible.builtin.apt:
    name: ntfs-3g
    state: present

- name: (DEBIAN) Install file compression tools and format support
  ansible.builtin.apt:
    pkg:
      - rar
      - unrar
      - zip
      - unzip
      - lzip
      - lzop
      - bzip2
      - tar
      - lhasa
      - lzma
      - arj
      - sharutils
      - p7zip
      - p7zip-full

- name: (DEBIAN) Install zRAM (systemd-zram-generator)
  ansible.builtin.apt:
    name: systemd-zram-generator
    state: present
