---
# general bootstrapping tasks file for Fedora hosts
- name: DNF configuration
  ansible.builtin.lineinfile:
    path: /etc/dnf/dnf.conf
    line: "{{ item }}"
    insertafter: EOF
    state: present
  loop:
    - "fastestmirror=True"              # Automatically chooses the fastest mirror
    - "deltarpm=True"                   # Enable DRPM for diff checking and lightweight downloads
    - "max_parallel_downloads=10"       # Set the maximum parallel downloads to 10

- name: Update repo cache
  ansible.builtin.dnf:
    update_cache: true

- name: Upgrade all packages
  ansible.builtin.dnf:
    name: "*"
    state: latest

- name: Install dnf-plugins-core
  ansible.builtin.dnf:
    name: dnf-plugins-core
    state: present
