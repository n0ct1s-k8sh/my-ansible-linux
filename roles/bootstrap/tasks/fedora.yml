---
# bootstrapping tasks file for Fedora hosts
- name: (FEDORA) Clean DNF cache
  ansible.builtin.command: /usr/bin/dnf clean all
  tags:
    - molecule-idempotence-notest

- name: (FEDORA) DNF configuration
  ansible.builtin.lineinfile:
    path: /etc/dnf/dnf.conf
    line: "{{ item }}"
    insertafter: EOF
    state: present
  loop:
    - "fastestmirror=True"              # Automatically chooses the fastest mirror
    - "deltarpm=True"                   # Enable DRPM for diff checking and lightweight downloads
    - "max_parallel_downloads=10"       # Set the maximum parallel downloads to 10

- name: (FEDORA) Update repo cache
  ansible.builtin.dnf:
    update_cache: true
    state: latest

- name: (FEDORA) Upgrade all packages
  ansible.builtin.dnf:
    name: "*"
    state: latest

- name: (FEDORA) Install dnf-plugins-core
  ansible.builtin.dnf:
    name: dnf-plugins-core
    state: present

- name: (FEDORA) Install the Development Tools group
  ansible.builtin.dnf:
    name: '@Development Tools'
    state: present

- name: (FEDORA) Install system monitoring & info tools
  ansible.builtin.dnf:
    name: 
      - htop
      - neofetch
      - s-tui
      - inxi
      - redhat-lsb-core
      - hwinfo
      - ethtool
      - traceroute
      - lm_sensors
      - lshw
      - hwdata
    state: present
